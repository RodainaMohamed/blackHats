<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Fav and Touch Icons -->
    <link rel="apple-touch-icon" sizes="144x144" href="images/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon" href="images/ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="images/ico/favicon.png">

    <!-- CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css" media="screen">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/plugin.css" rel="stylesheet">

    <!-- CSS Custom -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Add your style -->
    <link href="css/your-style.css" rel="stylesheet">

    <!-- Core JS -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/core-plugins.js"></script>
    <script type="text/javascript" src="js/customs.js"></script>

    <!-- Detail Page JS -->
    <script type="text/javascript" src="js/jquery.stickit.js"></script>
    <script type="text/javascript" src="js/bootstrap-tokenfield.js"></script>
    <script type="text/javascript" src="js/typeahead.bundle.min.js"></script>
    <script type="text/javascript" src="js/jquery.sumogallery.js"></script>
    <script type="text/javascript" src="js/images-grid.js"></script>
    <script type="text/javascript" src="js/jquery.bootstrap-touchspin.js"></script>
    <script type="text/javascript" src="js/customs-detail.js"></script>
    <script type="text/javascript" src="js/customs-result.js"></script>

</head>

<body>
    <div class="review-wrapper">

        <div class="review-header">

            <div class="GridLex-gap-30">

                <div class="GridLex-grid-noGutter-equalHeight GridLex-grid-middle">

                    <div class="GridLex-col-9_sm-8_xs-12_xss-12">

                        <div class="review-rating">
                            <div class="number">{{averageString}}</div>
                            <div class="rating-wrapper">
                                <div class="rating-item rating-item-lg">
                                    <input type="hidden" class="rating" data-filled="fa fa-star rating-rated" data-empty="fa fa-star-o" data-fractions="2" data-readonly value="4.5" />
                                </div>
                                {{count}} Reviews
                            </div>
                        </div>

                    </div>

                </div>

            </div>

        </div>

        <div class="review-content">

            <ul class="review-list">

                <li class="clearfix" *ngFor="let review of reviews; let i = index">

                    <div class="row">

                        <div class="col-xs-12 col-sm-12 col-md-3">
                            <div class="review-header">
                                <h6>{{review.business.name}}</h6>
                                <span class="review-date">{{review.time | date:'hh:mm - MMM d, y'}}</span>

                                <div class="rating-item">
                                    <input type="hidden" class="rating" data-filled="fa fa-star" data-empty="fa fa-star-o" data-fractions="2" data-readonly value="3.5" />
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12 col-sm-12 col-md-9">
                            <div class="review-replied">
                                <div class="review-content">

                                    <h4>{{review.comment}}</h4>
                                    <h4>Rating: {{review.rating}}</h4>

                                </div>

                            </div>

                            <div *ngIf="loggedIn">
                                <footer class="panel-footer">
                                    <div class="config">
                                      <a href="#editReviewModal" data-toggle="modal"  (click)="onEdit(i)">Edit</a>
                                    </div>
                                </footer>
                            </div>

                        </div>
                    </div>

                </li>

            </ul>

            <!-- <a href="#" class="review-load-more mb-40">load more...</a> -->

        </div>

    </div>

    <!-- start Edit Modal -->

    <div id="editReviewModal" class="modal fade login-box-wrapper" tabindex="-1" data-width="550" data-backdrop="static" data-keyboard="false" data-replace="true">
        <div class="modal-header">
            <h4 class="modal-title2 text-center">Edit Review</h4>
        </div>

        <div class="modal-body">
            <div *ngIf="!editDone">
                <div>
                    <div class="row gap-20">
                      <div>
                        <div >
                            <div class="col-sm-12 col-md-12">

                                <div class="form-group">
                                    <div *ngIf="editCommentWarning" class="alert alert-danger alert-dismissable">
                                        <a class="close" (click)="hideEditCommentWarning()" aria-label="close">&times;</a> Please fill out your Comment!
                                    </div>
                                    <label>Comment</label>
                                    <textarea style="resize: none;" class="form-control" type="text" rows="4" [(ngModel)]="editComment" name="editComment"></textarea>
                                </div>

                            </div>

                            <div class="col-sm-12 col-md-12">

                                <div class="form-group">
                                    <div *ngIf="editRatingWarning" class="alert alert-danger alert-dismissable">
                                        <a class="close" (click)="hideEditRatingWarning()" aria-label="close">&times;</a> Please Rate!
                                    </div>
                                    <label>Rating</label>
                                    <div class="input-group mb-15">
                                    <input class="form-control" type="number" [(ngModel)]="editRating" name="editRating">
                                  </div>
                                </div>

                            </div>

                        </div>
                      </div>
                    </div>
                </div>
            </div>

            <div *ngIf="editDone">
                <div class="create-done-wrapper">
                    <div class="icon">
                        <div class="icon-inner">
                            <i class="ti-check"></i>
                        </div>
                    </div>

                    <h1 class="text-lowercase">Congratulations!</h1>
                    <p class="lead">Your Review has been successfully edited</p>

                </div>
            </div>

        </div>

        <div class="modal-footer text-center">
            <button *ngIf="!editDone" type="button" class="btn btn-primary buttonSize" (click)="onSave(i)"> Save </button>
            <button *ngIf="!editDone" type="button" data-dismiss="modal" class="btn btn-primary btn-border buttonSize" (click)="onDelete(i)">Delete</button>
            <button *ngIf="editDone" type="button" (click)="onCancel()" data-dismiss="modal" class="btn btn-primary btn-border buttonSize">Cancel</button>
        </div>
    </div>
    <!-- end Edit Modal -->

</body>
